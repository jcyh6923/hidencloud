name: Hidencloud notifier

on:
  schedule:
    - cron: "0 * * * *"
  workflow_dispatch:

jobs:
  notifier:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Run notifier
        run: |
          python notifier.py \
            --url "https://dash.hidencloud.com/store/view/349" \
            --keyword "location" \
            --region "SG" \
            --region-available \
            --region-unavailable-text "full and unavailable" \
            --telegram-token "${{ secrets.TG_TOKEN }}" \
            --telegram-chat-id "${{ secrets.TG_CHAT_ID }}" \
            --telegram-message "有地区开放了" \
            --align-hour
            --region-available \
            --region-unavailable-text "full and unavailable"
